<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pozorište: append-transform &lt;a href=&quot;https://travis-ci.org/istanbuljs/append-transform&quot;&gt;&lt;img src=&quot;https://travis-ci.org/istanbuljs/append-transform.svg?branch=master&quot; alt=&quot;Build Status&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://coveralls.io/github/istanbuljs/append-transform?branch=master&quot;&gt;&lt;img src=&quot;https://coveralls.io/repos/github/istanbuljs/append-transform/badge.svg?branch=master&quot; alt=&quot;Coverage Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pozorište
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">append-transform <a href="https://travis-ci.org/istanbuljs/append-transform"><img src="https://travis-ci.org/istanbuljs/append-transform.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/istanbuljs/append-transform?branch=master"><img src="https://coveralls.io/repos/github/istanbuljs/append-transform/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<p>Install a transform to <code>require.extensions</code> that always runs last, even if additional extensions are added later </p>
</blockquote>
<p>The <a href="https://gist.github.com/jamestalmage/df922691475cff66c7e6">typical require extension</a> looks something like this:</p>
<div class="fragment"><div class="line">const myTransform = require(&#39;my-transform&#39;);</div>
<div class="line"> </div>
<div class="line">const oldExtension = require.extensions[&#39;.js&#39;];</div>
<div class="line"> </div>
<div class="line">require.extensions[&#39;.js&#39;] = (module, filename) =&gt; {</div>
<div class="line">    const oldCompile = module._compile;</div>
<div class="line"> </div>
<div class="line">    module._compile = (code, filename) =&gt; {</div>
<div class="line">        code = myTransform(code);</div>
<div class="line">        module._compile = oldCompile;</div>
<div class="line">        module._compile(code, filename);</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    oldExtension(module, filename);</div>
<div class="line">};</div>
</div><!-- fragment --><p>In <b>almost</b> all cases, that is sufficient and is the method that should be used (check out <a href="https://www.npmjs.com/package/pirates"><code>pirates</code></a> for an easy way to do it correctly). In <b>rare</b> cases you must ensure your transform remains the last one, even if other transforms are added later. For example, <code>nyc</code> uses this module to ensure its transform is applied last so it can capture the final source-map information, and ensure any language extensions it can't understand are already transpiled (ES2015 via <code>babel</code> for instance).</p>
<p><em>WARNING:</em> You should be sure you <em>actually</em> need this, as it takes control away from the user. Your transform remains the last one applied, even as users continue to add more transforms. This is potentially confusing. Coverage libraries like <code>nyc</code> (and <code>istanbul</code> on which it relies) have valid reasons for doing this, but you should prefer conventional transform installation via <a href="https://www.npmjs.com/package/pirates"><code>pirates</code></a>.</p>
<p>References:</p><ul>
<li><a href="https://gist.github.com/jamestalmage/df922691475cff66c7e6">Detailed Breakdown of How Require Extensions Work</a></li>
<li>The <a href="https://github.com/avajs/append-transform/blob/master/test/execution-order.js">test suite</a> provides a good overview of how this library manipulates the order in which transforms are applied.</li>
</ul>
<h1><a class="anchor" id="autotoc_md4720"></a>
Install</h1>
<div class="fragment"><div class="line">$ npm install --save append-transform</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4721"></a>
Usage</h1>
<div class="fragment"><div class="line">const appendTransform = require(&#39;append-transform&#39;);</div>
<div class="line">const myTransform = require(&#39;my-transform&#39;);</div>
<div class="line"> </div>
<div class="line">appendTransform((code, filename) =&gt; {</div>
<div class="line">    if (myTransform.shouldTransform(filename)) {</div>
<div class="line">        code = myTransform.transform(code);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return code;</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4722"></a>
API</h1>
<h2><a class="anchor" id="autotoc_md4723"></a>
appendTransform(transformFn, [extension])</h2>
<h3><a class="anchor" id="autotoc_md4724"></a>
transformFn</h3>
<p>Type: <code>function(code: string, filename: string)</code></p>
<p>A callback that modifies the incoming <code>code</code> argument in some way, and returns the transformed result. <code>filename</code> is provided to filter which files the transform applies to. If a transform should not manipulate a particular file, just return <code>code</code> without modifying it. It is fairly common to avoid transforming files in <code>node_modules</code>. In that case you may want to use <a href="https://www.npmjs.com/package/node-modules-regexp"><code>node-modules-regexp</code></a> to help reliably detect <code>node_modules</code> paths and avoid transforming them.</p>
<h3><a class="anchor" id="autotoc_md4725"></a>
extension</h3>
<p>Type: <code>string</code><br  />
 Default: &lsquo;&rsquo;.js'`</p>
<p>The extension for the types of files this transform is capable of handling.</p>
<h1><a class="anchor" id="autotoc_md4726"></a>
License</h1>
<p>MIT © <a href="https://github.com/jamestalmage">James Talmage</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
